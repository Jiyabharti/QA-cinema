<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styling.css">

    <script>
        
    
        
        document.addEventListener("DOMContentLoaded", () => {
            console.log("Loading DOM");
            const email_field = document.getElementById("email");
            const fname_field = document.getElementById("fname");
            const lname_field = document.getElementById("lname");
    
            const emailError = document.getElementById("eerror");
            const fnameError = document.getElementById("ferror");
            const lnameError = document.getElementById("lerror");

            fname_field.addEventListener("input", (event) => {
                
                //when the input is too short (no need to check for too long, as HTML maxlength doesn't allow to type more even when CTRL-V)
                if(fname_field.textContent.length < 1){
                    console.log("Too long/too short");
                    fnameError.textContent = "The First Name entered is too short";
                    fnameError.className = "error";
                }

                //when the input doesn't start with uppercase letters and then only contains lowercase letters and nothing else 
                if(fname_field.validity.patternMismatch) {
                    console.log("Pattern mismatch");
                    fnameError.textContent = "Only lower and upper-case letters are allowed";
                    fnameError.className = "error";
                }

                //reset error when field becomes valid
                if(fname_field.validity.valid){
                    fnameError.textContent = "";
                }    
            });
            
            lname_field.addEventListener("input", (event) => {
                //when the input is too short (no need to check for too long, as HTML maxlength doesn't allow to type more even when CTRL-V)
                if(lname_field.textContent.length < 1){
                    console.log("Too long/too short");
                    lnameError.textContent = "The Last Name entered is too short";
                    lnameError.className = "error";
                }

                //when the input doesn't start with uppercase letters and then only contains lowercase letters and nothing else 
                if(lname_field.validity.patternMismatch) {
                    console.log("Pattern mismatch");
                    lnameError.textContent = "Only lower and upper-case letters are allowed";
                    lnameError.className = "error";
                }

                //reset error when field becomes valid
                if(lname_field.validity.valid){
                    lnameError.textContent = "";
                }    
            });

            email_field.addEventListener("input", (event) => {
                //when email address is not of a@b.com format
                if(email_field.validity.patternMismatch) {
                    console.log("Pattern mismatch");
                    emailError.textContent = "Email address not valid";
                    emailError.className = "error";
                }
            });
        });
    
        
    
        
    </script>
</head>

<!-- Doing it as a JS script, since can't display a message by just doing CSS -->

<body>

    <!-- HERE GOES NAVBAR -->
    <secton>
        <!-- HERE GOES IMAGE AND SIGN UP INFO TEXT -->
    </secton>
    
    <section>
        <form>
            <label for="nametitle">Title: </label>
            <select name="nametitle" id="nametitle" required>
                <option>Mx</option>
                <option>Mr</option>
                <option>Miss</option>
                <option>Ms</option>
                <option>Mrs</option>
                <option>Dr</option>
                <option>Sir</option>
                <option>Dame</option>
                <option>Lord</option>
                <option>Lady</option>
            </select>

            <label for="fname">First Name:
                <input type="text" id="fname" name="fname" minlength="1" maxlength="15" pattern="[A-Za-z]*" required><br>
                <p id="ferror" class="error"></p>
            </label>

            <label for="lname">Last Name: 
                <input type="text" id="lname" name="lname" minlength="1" maxlength="15" pattern="[A-Za-z]*" required><br>
                <p id="lerror" class="error"></p>
            </label>

            <label for="email">Email:
                <input type="email" id="email" name="email" pattern = "^[\w]+@[\w]+\.[\w]+$" required><br>
                <p id="eerror" class="error"></p>
            </label>
            <label for="phone">Phone Number:</label>
            <input type="tel" id="phone" name="phone"><br>
            
            <label for="male">Male</label>
            <input type="radio" id="male" name="gender" value="Male"><br>

            <label for="female">Female</label>
            <input type="radio" id="female" name="gender" value="Female"><br>

            <label for="nonb">Nonbinary</label>
            <input type="radio" id="nonb" name="gender" value="Nonbinary"><br>

            <label for="nosay">Prefer not to say</label>
            <input type="radio" id="nosay" name="gender" value="Prefer not to say"><br>
            
            <input type="submit">
        </form>
    </section>


    <!-- HERE GOES FOOTER -->
</body>
</html>